#!/bin/sh

# draw terminals


#get the wm
id=$(xprop -root -notype _NET_SUPPORTING_WM_CHECK)
id=${id##* }
wm=$(xprop -id "$id" -notype -len 25 -f _NET_WM_NAME 8t)
wm=${wm##*_NET_WM_NAME = \"}
wm=${wm%%\"*}
dimensions=$(slop -f %wx%h+%x+%y)

case $wm in
    bspwm)
        # take borders into account
        b=$(bspc config border_width)

		slop -f '%w %h %x %y' | {
  			  read -r w h x y
		}

            w=$((w - 2 * b))
            h=$((h - 2 * b))

            # make the newly spawned window floating and with the right geometry
            bspc rule -a \* -o state=floating rectangle="${w}x${h}+${x}+${y}"              
        [ "$w" != "" ] || exit
        
        tabbed -d -c -r 2 st -w ''
        ;;
    dwm)

    tabbed -d -c -g ${dimensions} -r 2 st -w '' -T draw
        ;;
esac
